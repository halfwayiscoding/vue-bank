import{L as _,N as $,O as w,P as D,k as s,R as i,V as v}from"./vendor-64db4e53.js";import{_ as N,U as y,a as f}from"./index-5b02c60e.js";import{s as a,a as L}from"./vant-dbf08e58.js";const R={class:"permission-demo"},T={class:"content"},A={class:"user-status"},O={class:"permission-tests"},x={class:"permission-switch"},M={class:"protected-features"},B={__name:"PermissionDemo",setup(U){const m=_(),o=t=>f.hasPermission(t),r=t=>f.hasRole(t),u=t=>f.hasVIPLevel(t),P=t=>{const e=o(t);a({message:`权限 ${t}: ${e?"通过":"拒绝"}`,type:e?"success":"fail"})},I=t=>{const e=r(t);a({message:`角色 ${t}: ${e?"通过":"拒绝"}`,type:e?"success":"fail"})},p=t=>{const e=u(t);a({message:`VIP等级 ${t}: ${e?"通过":"拒绝"}`,type:e?"success":"fail"})},V=async t=>{try{await L({title:"切换用户",message:`确定要切换为${t==="admin"?"管理员":t==="vip"?"VIP用户":"普通用户"}吗？`,confirmButtonText:"确定",cancelButtonText:"取消"});const e={user:{id:1,username:"testuser",name:"测试用户",avatar:"👤",role:"user",level:"NORMAL",permissions:["user:read"]},vip:{id:2,username:"vipuser",name:"VIP用户",avatar:"💎",role:"vip",level:"VIP",permissions:["user:read","user:write"]},admin:{id:3,username:"admin",name:"管理员",avatar:"👑",role:"admin",level:"DIAMOND",permissions:["user:read","user:write","admin:manage"]}};f.setUserInfo(e[t]),a({message:`已切换为${t==="admin"?"管理员":t==="vip"?"VIP用户":"普通用户"}`,type:"success"})}catch{}},c=()=>{o("user:read")?m.push("/account"):a("权限不足")},k=()=>{o("user:read")?m.push("/transfer"):a("权限不足")},C=()=>{u("VIP")?m.push("/wealth"):a("需要VIP权限")},g=()=>{r("admin")?m.push("/component-demo"):a("需要管理员权限")};return(t,e)=>{const b=$("van-nav-bar"),n=$("van-cell"),d=$("van-cell-group");return w(),D("div",R,[s(b,{title:"权限管理演示","left-arrow":"",onClickLeft:e[0]||(e[0]=l=>t.$router.back())}),i("div",T,[i("div",A,[e[14]||(e[14]=i("h3",null,"当前用户状态",-1)),s(y)]),i("div",O,[e[15]||(e[15]=i("h3",null,"权限测试",-1)),s(d,{title:"基础权限"},{default:v(()=>[s(n,{title:"用户信息查看",value:o("user:read")?"✅ 有权限":"❌ 无权限",onClick:e[1]||(e[1]=l=>P("user:read"))},null,8,["value"]),s(n,{title:"用户信息编辑",value:o("user:write")?"✅ 有权限":"❌ 无权限",onClick:e[2]||(e[2]=l=>P("user:write"))},null,8,["value"]),s(n,{title:"管理员功能",value:o("admin:manage")?"✅ 有权限":"❌ 无权限",onClick:e[3]||(e[3]=l=>P("admin:manage"))},null,8,["value"])]),_:1}),s(d,{title:"角色权限"},{default:v(()=>[s(n,{title:"普通用户功能",value:r("user")?"✅ 有权限":"❌ 无权限",onClick:e[4]||(e[4]=l=>I("user"))},null,8,["value"]),s(n,{title:"VIP用户功能",value:r("vip")?"✅ 有权限":"❌ 无权限",onClick:e[5]||(e[5]=l=>I("vip"))},null,8,["value"]),s(n,{title:"管理员功能",value:r("admin")?"✅ 有权限":"❌ 无权限",onClick:e[6]||(e[6]=l=>I("admin"))},null,8,["value"])]),_:1}),s(d,{title:"VIP等级权限"},{default:v(()=>[s(n,{title:"普通用户功能",value:u("NORMAL")?"✅ 有权限":"❌ 无权限",onClick:e[7]||(e[7]=l=>p("NORMAL"))},null,8,["value"]),s(n,{title:"VIP会员功能",value:u("VIP")?"✅ 有权限":"❌ 无权限",onClick:e[8]||(e[8]=l=>p("VIP"))},null,8,["value"]),s(n,{title:"超级VIP功能",value:u("SVIP")?"✅ 有权限":"❌ 无权限",onClick:e[9]||(e[9]=l=>p("SVIP"))},null,8,["value"]),s(n,{title:"钻石会员功能",value:u("DIAMOND")?"✅ 有权限":"❌ 无权限",onClick:e[10]||(e[10]=l=>p("DIAMOND"))},null,8,["value"])]),_:1})]),i("div",x,[e[16]||(e[16]=i("h3",null,"权限切换演示",-1)),s(d,null,{default:v(()=>[s(n,{title:"切换为普通用户",onClick:e[11]||(e[11]=l=>V("user"))}),s(n,{title:"切换为VIP用户",onClick:e[12]||(e[12]=l=>V("vip"))}),s(n,{title:"切换为管理员",onClick:e[13]||(e[13]=l=>V("admin"))})]),_:1})]),i("div",M,[e[17]||(e[17]=i("h3",null,"受保护的功能",-1)),s(d,null,{default:v(()=>[s(n,{title:"账户管理",onClick:c,disabled:!o("user:read")},null,8,["disabled"]),s(n,{title:"转账功能",onClick:k,disabled:!o("user:read")},null,8,["disabled"]),s(n,{title:"理财产品",onClick:C,disabled:!u("VIP")},null,8,["disabled"]),s(n,{title:"开发者工具",onClick:g,disabled:!r("admin")},null,8,["disabled"])]),_:1})])])])}}},j=N(B,[["__scopeId","data-v-b1b309e8"]]);export{j as default};
